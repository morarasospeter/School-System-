<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Fees Records</title>
    <style>
        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            background: linear-gradient(135deg, #43a047, #2e7d32); 
            margin: 0; padding: 0; 
            min-height: 100vh; 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
        }
        h2 { 
            color: #fff; 
            margin: 20px 0 15px; 
            font-size: 28px; 
            text-shadow: 2px 2px 6px rgba(0,0,0,0.4); 
        }
        .header-buttons {
            width: 95%;
            max-width: 950px;
            display: flex;
            justify-content: space-between;
            margin: 20px 0;
        }
        .header-buttons a {
            padding: 10px 18px;
            border-radius: 8px;
            color: #fff;
            text-decoration: none;
            font-weight: bold;
        }
        .btn-add { background-color: #28a745; }
        .btn-add:hover { background-color: #1e7e34; }
        .btn-back { background-color: #6c757d; }
        .btn-back:hover { background-color: #565e64; }

        .search-box { 
            background: rgba(255,255,255,0.95); 
            padding: 15px 20px; 
            margin: 15px 0 25px; 
            border-radius: 12px; 
            box-shadow: 0 6px 18px rgba(0,0,0,0.25); 
            display: flex; 
            gap: 10px; 
            width: 90%; 
            max-width: 450px; 
        }
        .search-box input { 
            flex: 1; 
            padding: 12px; 
            border-radius: 8px; 
            border: 1px solid #ccc; 
        }
        .search-box input:focus { 
            border: 1px solid #2e7d32; 
            outline: none; 
        }
        .search-box button { 
            padding: 12px 20px; 
            background: #2e7d32; 
            border: none; 
            border-radius: 8px; 
            color: #fff; 
            cursor: pointer; 
            transition: background 0.3s ease; 
        }
        .search-box button:hover { background: #1b5e20; }

        .table-container { 
            background: rgba(255,255,255,0.95); 
            border-radius: 12px; 
            padding: 20px; 
            width: 95%; 
            max-width: 950px; 
            box-shadow: 0 8px 25px rgba(0,0,0,0.2); 
            overflow-x: auto; 
        }
        table { width: 100%; border-collapse: collapse; }
        th, td { padding: 14px; border-bottom: 1px solid #ddd; text-align: center; }
        th { background: #2e7d32; color: #fff; text-transform: uppercase; }
        tr:hover { background: #e8f5e9; }
        .delete-btn {
            padding: 6px 12px; 
            background: #e53935; 
            color: #fff; 
            border: none; 
            border-radius: 6px; 
            cursor: pointer;
            transition: background 0.3s ease;
        }
        .delete-btn:hover { background: #b71c1c; }
    </style>
</head>
<body>

    <div class="header-buttons">
        <a href="{% url 'home' %}" class="btn-back">‚Üê Back to Menu</a>
        <a href="{% url 'overall_entry_dashboard' %}?section=fee" class="btn-add">Add Record</a>
    </div>

    <h2>Fees Records</h2>

    <form method="GET" class="search-box">
        <input type="text" name="admission_number" placeholder="Search by Admission Number..." value="{{ request.GET.admission_number }}">
        <button type="submit">Search</button>
    </form>

    <div class="table-container">
        <table>
            <tr>
                <th>Admission No</th>
                <th>Student Name</th>
                <th>Amount Due</th>
                <th>Amount Paid</th>
                <th>Balance</th>
                <th>Status</th>
                <th>Action</th>
            </tr>
            {% for record in records %}
            <tr>
                <td>{{ record.student.admission_number }}</td>
                <td>{{ record.student.first_name }} {{ record.student.last_name }}</td>
                <td>{{ record.amount_due }}</td>
                <td>{{ record.amount_paid }}</td>
                <td>{{ record.balance }}</td>
                <td>{{ record.payment_status }}</td>
                <td>
                    <form method="post" style="display:inline;">
                        {% csrf_token %}
                        <button type="submit" name="delete-record" value="{{ record.id }}" class="delete-btn"
                                onclick="return confirm('Are you sure you want to delete this record?');">
                            Delete
                        </button>
                    </form>
                </td>
            </tr>
            {% empty %}
            <tr><td colspan="7" style="text-align:center; color:#888;">No records found</td></tr>
            {% endfor %}
        </table>
    </div>

</body>
</html>
